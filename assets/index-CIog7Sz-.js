import{j as e,r as l,a as R}from"./react-BrP7bTIu.js";import{c as E}from"./react-dom-BtizlmEl.js";import{i as I,g as P,a as M,b as B,o as O,s as q,c as z,d as D,u as H,e as W,f as F,h as N,j as S,k as K}from"./@firebase-Cs7WtrjH.js";import"./firebase-B4oYcQYW.js";import{d as _,e as Z,f as Y,g as x}from"./react-router-C0nYgrbg.js";import{N as k,H as G}from"./react-router-dom-iW47g7mf.js";import"./scheduler-CzFDRTuY.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./@remix-run-BgBg4VcQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=a(s);fetch(s.href,r)}})();const J="_container_11yjs_2",Q={container:J},V="_container_ashy1_1",X={container:V},ee="_container_12177_1",se="_time_12177_12",$={container:ee,time:se},p=({messageText:n,time:t})=>e.jsxs("div",{className:$.container,children:[e.jsx("span",{children:n}),e.jsx("span",{className:$.time,children:t})]}),te="_container_6gyfo_1",re={container:te},ne=()=>e.jsx("div",{className:re.container,children:e.jsx("textarea",{})}),ae=()=>e.jsxs("div",{className:X.container,children:[e.jsx(p,{messageText:"111111111111111111111111",time:"15:40"}),e.jsx(p,{messageText:"22222222222222222222",time:"15:40"}),e.jsx(p,{messageText:"333333333333333333333333333333333",time:"15:40"}),e.jsx(p,{messageText:"444444444444444444",time:"15:40"}),e.jsx(p,{messageText:"55555555555555555555555555",time:"15:40"}),e.jsx(ne,{})]}),oe="_container_140fh_1",ce="_wrapper_140fh_10",ie="_username_140fh_13",le="_message_140fh_16",g={container:oe,wrapper:ce,username:ie,message:le},m=({username:n,img:t,lastMessage:a})=>e.jsxs("div",{className:g.container,children:[e.jsx("img",{src:t}),e.jsxs("div",{className:g.wrapper,children:[e.jsx("p",{className:g.username,children:n}),e.jsx("p",{className:g.message,children:a})]})]}),ue="_container_13318_1",de={container:ue},pe=()=>e.jsx("div",{className:de.container,children:e.jsx("input",{type:"text",placeholder:"Search"})}),me="_container_yqqb2_1",ge="_navbar_yqqb2_5",he="_logoutBtn_yqqb2_11",j={container:me,navbar:ge,logoutBtn:he},xe={apiKey:"AIzaSyAB80-tZTx63iK-eSokF2n1HNM25fO_rZ4",authDomain:"react-chat-app-cf377.firebaseapp.com",projectId:"react-chat-app-cf377",storageBucket:"react-chat-app-cf377.appspot.com",messagingSenderId:"333727045415",appId:"1:333727045415:web:07aac7a056b70e402bbb02"};I(xe);const h=P(),je=M(),C=B(),y=l.createContext({currentUser:{},isLoading:!0}),fe=({children:n})=>{const[t,a]=l.useState({}),[c,s]=l.useState(!0);return l.useEffect(()=>{const r=O(h,o=>{o&&a(o),s(!1)});return()=>{r()}},[t]),e.jsx(y.Provider,{value:{currentUser:t,isLoading:c},children:n})},_e=()=>{const n=_(),{currentUser:t}=l.useContext(y);return e.jsxs("div",{className:j.container,children:[e.jsxs("div",{className:j.navbar,children:[e.jsx("img",{src:t==null?void 0:t.photoURL,alt:t.displayName}),e.jsx("span",{children:t.displayName}),e.jsx("button",{className:j.logoutBtn,onClick:()=>{q(h).then(()=>{console.log("WYLogoWANO"),n("../login",{replace:!0})}).catch(a=>{console.log(a)})},children:"Logout"})]}),e.jsx(pe,{}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"})]})},ye="_container_16cuw_1",we="_wrapper_16cuw_5",ve="_loadingScreen_16cuw_9",f={container:ye,wrapper:we,loadingScreen:ve},be=()=>{const{currentUser:n,isLoading:t}=l.useContext(y);return console.log(n),console.log(t),t?e.jsx("div",{className:f.loading,children:"Loading..."}):"email"in n?e.jsx("div",{className:f.container,children:e.jsxs("div",{className:f.wrapper,children:[e.jsx(_e,{}),e.jsx(ae,{})]})}):e.jsx(Z,{to:{pathname:"/login"}})},Ne="_container_rtgsm_1",Se="_error_rtgsm_21",L={container:Ne,error:Se},$e=()=>{const[n,t]=l.useState(""),a=_(),c=s=>{s.preventDefault();const r=s.currentTarget[0].value,o=s.currentTarget[1].value,u=s.currentTarget[2].value,w=s.currentTarget[4],v=w.files?w.files[0]:null;console.log(r);try{const d=z(h,o,u),A=D(je,r);if(v){const b=H(A,v);b.on("state_changed",i=>{const U=i.bytesTransferred/i.totalBytes*100;switch(console.log("Upload is "+U+"% done"),i.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},i=>{t(String(i))},()=>{W(b.snapshot.ref).then(async i=>{await F((await d).user,{displayName:r,photoURL:i}),await N(S(C,"users",(await d).user.uid),{uid:(await d).user.uid,displayName:r,email:o,photoURL:i}),await N(S(C,"userChats",(await d).user.uid),{})}),a("../",{replace:!0})})}}catch(d){t(String(d)),console.log(d)}};return e.jsxs("div",{className:L.container,children:[e.jsxs("form",{onSubmit:s=>c(s),children:[e.jsx("input",{type:"text",autoComplete:"username",placeholder:"Username"}),e.jsx("input",{type:"email",autoComplete:"email",placeholder:"E-mail"}),e.jsx("input",{type:"password",autoComplete:"new-password",placeholder:"Password"}),e.jsx("input",{type:"password",autoComplete:"new-password",placeholder:"Confirm password"}),e.jsx("input",{type:"file"}),e.jsx("button",{children:"Sign Up"}),n!==""&&e.jsx("span",{className:L.error,children:"Something went wrong"})]}),e.jsxs("p",{children:["Already have an account? ",e.jsx(k,{to:"/login",children:"Log In"})]})]})},Ce="_container_11tcz_1",Le="_error_11tcz_25",T={container:Ce,error:Le},Te=()=>{const[n,t]=l.useState(""),a=_(),c=s=>{s.preventDefault();const r=s.currentTarget[0].value,o=s.currentTarget[1].value;try{try{K(h,r,o),console.log("udalo sie zalogowac")}catch(u){t(String(u)),console.log(u)}a("../",{replace:!0}),console.log("przenosze na homepage")}catch(u){t(String(u)),console.log(u)}};return e.jsxs("div",{className:T.container,children:[e.jsxs("form",{onSubmit:s=>c(s),children:[e.jsx("input",{type:"email",autoComplete:"email",placeholder:"E-mail"}),e.jsx("input",{type:"password",autoComplete:"current-password",placeholder:"Password"}),e.jsx("button",{children:"Login"}),n!==""&&e.jsx("span",{className:T.error,children:"Something went wrong"})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(k,{to:"/register",children:"Sign Up"})]})]})};function ke(){return e.jsx("div",{className:Q.container,children:e.jsxs(Y,{children:[e.jsx(x,{path:"/",element:e.jsx(be,{})}),e.jsx(x,{path:"/register",element:e.jsx($e,{})}),e.jsx(x,{path:"/login",element:e.jsx(Te,{})})]})})}E.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(fe,{children:e.jsx(G,{children:e.jsx(ke,{})})})}));
