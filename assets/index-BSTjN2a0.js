import{j as e,r as u,a as T}from"./react-BrP7bTIu.js";import{c as A}from"./react-dom-BtizlmEl.js";import{i as P,g as I,a as M,b as E,s as O,c as z,d as B,u as D,e as H,f as F,h as _,j as y,o as K}from"./@firebase-BOpatifW.js";import"./firebase-CjFXL9rd.js";import{N as L,H as Z}from"./react-router-dom-DacefRkD.js";import{d as q,e as W,f as g,g as G}from"./react-router-B3RJgGeP.js";import"./scheduler-CzFDRTuY.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./@remix-run-BgBg4VcQ.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const t of s)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function a(s){const t={};return s.integrity&&(t.integrity=s.integrity),s.referrerPolicy&&(t.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?t.credentials="include":s.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(s){if(s.ep)return;s.ep=!0;const t=a(s);fetch(s.href,t)}})();const J="_container_ynpao_2",Q="_loadingScreen_ynpao_10",b={container:J,loadingScreen:Q},V="_container_ashy1_1",X={container:V},Y="_container_12177_1",ee="_time_12177_12",v={container:Y,time:ee},d=({messageText:n,time:r})=>e.jsxs("div",{className:v.container,children:[e.jsx("span",{children:n}),e.jsx("span",{className:v.time,children:r})]}),se="_container_6gyfo_1",te={container:se},re=()=>e.jsx("div",{className:te.container,children:e.jsx("textarea",{})}),ne=()=>e.jsxs("div",{className:X.container,children:[e.jsx(d,{messageText:"111111111111111111111111",time:"15:40"}),e.jsx(d,{messageText:"22222222222222222222",time:"15:40"}),e.jsx(d,{messageText:"333333333333333333333333333333333",time:"15:40"}),e.jsx(d,{messageText:"444444444444444444",time:"15:40"}),e.jsx(d,{messageText:"55555555555555555555555555",time:"15:40"}),e.jsx(re,{})]}),ae="_container_140fh_1",oe="_wrapper_140fh_10",ce="_username_140fh_13",ie="_message_140fh_16",m={container:ae,wrapper:oe,username:ce,message:ie},p=({username:n,img:r,lastMessage:a})=>e.jsxs("div",{className:m.container,children:[e.jsx("img",{src:r}),e.jsxs("div",{className:m.wrapper,children:[e.jsx("p",{className:m.username,children:n}),e.jsx("p",{className:m.message,children:a})]})]}),le="_container_13318_1",ue={container:le},de=()=>e.jsx("div",{className:ue.container,children:e.jsx("input",{type:"text",placeholder:"Search"})}),pe="_container_bzkbo_1",w={container:pe},me={apiKey:"AIzaSyAB80-tZTx63iK-eSokF2n1HNM25fO_rZ4",authDomain:"react-chat-app-cf377.firebaseapp.com",projectId:"react-chat-app-cf377",storageBucket:"react-chat-app-cf377.appspot.com",messagingSenderId:"333727045415",appId:"1:333727045415:web:07aac7a056b70e402bbb02"};P(me);const h=I(),ge=M(),N=E(),he=()=>e.jsxs("div",{className:w.container,children:[e.jsx("div",{className:w.navbar,children:e.jsx("button",{onClick:()=>O(h),children:"Logout"})}),e.jsx(de,{}),e.jsx(p,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(p,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(p,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(p,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(p,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"})]}),xe="_container_zhmx4_1",je="_wrapper_zhmx4_5",S={container:xe,wrapper:je},fe=()=>e.jsx("div",{className:S.container,children:e.jsxs("div",{className:S.wrapper,children:[e.jsx(he,{}),e.jsx(ne,{})]})}),_e="_container_rtgsm_1",ye="_error_rtgsm_21",$={container:_e,error:ye},be=()=>{const[n,r]=u.useState(""),a=q(),c=s=>{s.preventDefault();const t=s.currentTarget[0].value,o=s.currentTarget[1].value,U=s.currentTarget[2].value,x=s.currentTarget[4],j=x.files?x.files[0]:null;console.log(t);try{const l=z(h,o,U),C=B(ge,t);if(j){const f=D(C,j);f.on("state_changed",i=>{const R=i.bytesTransferred/i.totalBytes*100;switch(console.log("Upload is "+R+"% done"),i.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},i=>{r(String(i))},()=>{H(f.snapshot.ref).then(async i=>{await F((await l).user,{displayName:t,photoURL:i}),await _(y(N,"users",(await l).user.uid),{uid:(await l).user.uid,displayName:t,email:o,photoURL:i}),await _(y(N,"userChats",(await l).user.uid),{}),a("../",{replace:!0})})})}}catch(l){r(String(l)),console.log(l)}};return e.jsxs("div",{className:$.container,children:[e.jsxs("form",{onSubmit:s=>c(s),children:[e.jsx("input",{type:"text",placeholder:"Username"}),e.jsx("input",{type:"email",placeholder:"E-mail"}),e.jsx("input",{type:"new-password",placeholder:"Password"}),e.jsx("input",{type:"new-password",placeholder:"Confirm password"}),e.jsx("input",{type:"file"}),e.jsx("button",{children:"Sign Up"}),n!==""&&e.jsx("span",{className:$.error,children:"Something went wrong"})]}),e.jsxs("p",{children:["Already have an account? ",e.jsx(L,{to:"/login",children:"Log In"})]})]})},ve="_container_rtgsm_1",we="_error_rtgsm_21",Ne={container:ve,error:we},Se=()=>e.jsxs("div",{className:Ne.container,children:[e.jsxs("form",{children:[e.jsx("input",{type:"email",placeholder:"E-mail"}),e.jsx("input",{type:"password",placeholder:"Password"}),e.jsx("button",{children:"Login"})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(L,{to:"/register",children:"Sign Up"})]})]}),k=u.createContext({currentUser:{},isLoading:!0}),$e=({children:n})=>{const[r,a]=u.useState({}),[c,s]=u.useState(!0);return u.useEffect(()=>{const t=K(h,o=>{o&&a(o),s(!1)});return()=>{t()}},[r]),e.jsx(k.Provider,{value:{currentUser:r,isLoading:c},children:n})};function Le(){const{currentUser:n,isLoading:r}=u.useContext(k);if(console.log(n),console.log(r),r)return e.jsx("div",{className:b.loadingScreen,children:"Loading..."});const a=({outlet:c})=>"email"in n?c:e.jsx(G,{to:{pathname:"/login"}});return e.jsx("div",{className:b.container,children:e.jsxs(W,{children:[e.jsx(g,{path:"/",element:e.jsx(a,{outlet:e.jsx(fe,{})})}),e.jsx(g,{path:"/register",element:e.jsx(be,{})}),e.jsx(g,{path:"/login",element:e.jsx(Se,{})})]})})}A.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx($e,{children:e.jsx(Z,{children:e.jsx(Le,{})})})}));
