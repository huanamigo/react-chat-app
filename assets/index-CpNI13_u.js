import{j as e,r as d,a as E}from"./react-BrP7bTIu.js";import{c as I}from"./react-dom-BtizlmEl.js";import{i as P,g as R,a as M,b as O,s as z,o as D,c as B,d as H,u as W,e as F,f as K,h as v,j as b,k as Z}from"./@firebase-Cs7WtrjH.js";import"./firebase-B4oYcQYW.js";import{d as f,e as q,f as Y,g as x}from"./react-router-C0nYgrbg.js";import{N as T,H as G}from"./react-router-dom-iW47g7mf.js";import"./scheduler-CzFDRTuY.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";import"./@remix-run-BgBg4VcQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function o(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(s){if(s.ep)return;s.ep=!0;const r=o(s);fetch(s.href,r)}})();const J="_container_11yjs_2",Q={container:J},V="_container_ashy1_1",X={container:V},ee="_container_12177_1",se="_time_12177_12",N={container:ee,time:se},p=({messageText:n,time:t})=>e.jsxs("div",{className:N.container,children:[e.jsx("span",{children:n}),e.jsx("span",{className:N.time,children:t})]}),te="_container_6gyfo_1",re={container:te},ne=()=>e.jsx("div",{className:re.container,children:e.jsx("textarea",{})}),ae=()=>e.jsxs("div",{className:X.container,children:[e.jsx(p,{messageText:"111111111111111111111111",time:"15:40"}),e.jsx(p,{messageText:"22222222222222222222",time:"15:40"}),e.jsx(p,{messageText:"333333333333333333333333333333333",time:"15:40"}),e.jsx(p,{messageText:"444444444444444444",time:"15:40"}),e.jsx(p,{messageText:"55555555555555555555555555",time:"15:40"}),e.jsx(ne,{})]}),oe="_container_140fh_1",ce="_wrapper_140fh_10",ie="_username_140fh_13",le="_message_140fh_16",g={container:oe,wrapper:ce,username:ie,message:le},m=({username:n,img:t,lastMessage:o})=>e.jsxs("div",{className:g.container,children:[e.jsx("img",{src:t}),e.jsxs("div",{className:g.wrapper,children:[e.jsx("p",{className:g.username,children:n}),e.jsx("p",{className:g.message,children:o})]})]}),ue="_container_13318_1",de={container:ue},pe=()=>e.jsx("div",{className:de.container,children:e.jsx("input",{type:"text",placeholder:"Search"})}),me="_container_bzkbo_1",S={container:me},ge={apiKey:"AIzaSyAB80-tZTx63iK-eSokF2n1HNM25fO_rZ4",authDomain:"react-chat-app-cf377.firebaseapp.com",projectId:"react-chat-app-cf377",storageBucket:"react-chat-app-cf377.appspot.com",messagingSenderId:"333727045415",appId:"1:333727045415:web:07aac7a056b70e402bbb02"};P(ge);const h=R(),he=M(),$=O(),xe=()=>{const n=f();return e.jsxs("div",{className:S.container,children:[e.jsx("div",{className:S.navbar,children:e.jsx("button",{onClick:()=>{z(h).then(()=>{console.log("WYLogoWANO"),n("../login",{replace:!0})}).catch(t=>{console.log(t)})},children:"Logout"})}),e.jsx(pe,{}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"}),e.jsx(m,{username:"janek",img:"https://source.unsplash.com/random",lastMessage:"brudka"})]})},je="_container_16cuw_1",fe="_wrapper_16cuw_5",_e="_loadingScreen_16cuw_9",j={container:je,wrapper:fe,loadingScreen:_e},A=d.createContext({currentUser:{},isLoading:!0}),ye=({children:n})=>{const[t,o]=d.useState({}),[c,s]=d.useState(!0);return d.useEffect(()=>{const r=D(h,a=>{a&&o(a),s(!1)});return()=>{r()}},[t]),e.jsx(A.Provider,{value:{currentUser:t,isLoading:c},children:n})},we=()=>{const{currentUser:n,isLoading:t}=d.useContext(A);return console.log(n),console.log(t),t?e.jsx("div",{className:j.loading,children:"Loading..."}):"email"in n?e.jsx("div",{className:j.container,children:e.jsxs("div",{className:j.wrapper,children:[e.jsx(xe,{}),e.jsx(ae,{})]})}):e.jsx(q,{to:{pathname:"/login"}})},ve="_container_rtgsm_1",be="_error_rtgsm_21",L={container:ve,error:be},Ne=()=>{const[n,t]=d.useState(""),o=f(),c=s=>{s.preventDefault();const r=s.currentTarget[0].value,a=s.currentTarget[1].value,l=s.currentTarget[2].value,_=s.currentTarget[4],y=_.files?_.files[0]:null;console.log(r);try{const u=B(h,a,l),U=H(he,r);if(y){const w=W(U,y);w.on("state_changed",i=>{const C=i.bytesTransferred/i.totalBytes*100;switch(console.log("Upload is "+C+"% done"),i.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running");break}},i=>{t(String(i))},()=>{F(w.snapshot.ref).then(async i=>{await K((await u).user,{displayName:r,photoURL:i}),await v(b($,"users",(await u).user.uid),{uid:(await u).user.uid,displayName:r,email:a,photoURL:i}),await v(b($,"userChats",(await u).user.uid),{})}),o("../",{replace:!0})})}}catch(u){t(String(u)),console.log(u)}};return e.jsxs("div",{className:L.container,children:[e.jsxs("form",{onSubmit:s=>c(s),children:[e.jsx("input",{type:"text",placeholder:"Username"}),e.jsx("input",{type:"email",placeholder:"E-mail"}),e.jsx("input",{type:"new-password",placeholder:"Password"}),e.jsx("input",{type:"new-password",placeholder:"Confirm password"}),e.jsx("input",{type:"file"}),e.jsx("button",{children:"Sign Up"}),n!==""&&e.jsx("span",{className:L.error,children:"Something went wrong"})]}),e.jsxs("p",{children:["Already have an account? ",e.jsx(T,{to:"/login",children:"Log In"})]})]})},Se="_container_rtgsm_1",$e="_error_rtgsm_21",k={container:Se,error:$e},Le=()=>{const[n,t]=d.useState(""),o=f(),c=s=>{s.preventDefault();const r=s.currentTarget[0].value,a=s.currentTarget[1].value;try{try{Z(h,r,a),console.log("udalo sie zalogowac")}catch(l){t(String(l)),console.log(l)}o("../",{replace:!0}),console.log("przenosze na homepage")}catch(l){t(String(l)),console.log(l)}};return e.jsxs("div",{className:k.container,children:[e.jsxs("form",{onSubmit:s=>c(s),children:[e.jsx("input",{type:"email",placeholder:"E-mail"}),e.jsx("input",{type:"password",placeholder:"Password"}),e.jsx("button",{children:"Login"}),n!==""&&e.jsx("span",{className:k.error,children:"Something went wrong"})]}),e.jsxs("p",{children:["Don't have an account? ",e.jsx(T,{to:"/register",children:"Sign Up"})]})]})};function ke(){return e.jsx("div",{className:Q.container,children:e.jsxs(Y,{children:[e.jsx(x,{path:"/",element:e.jsx(we,{})}),e.jsx(x,{path:"/register",element:e.jsx(Ne,{})}),e.jsx(x,{path:"/login",element:e.jsx(Le,{})})]})})}I.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(ye,{children:e.jsx(G,{children:e.jsx(ke,{})})})}));
